# Complete File Reference Guide - Frontend & Backend

## ğŸ¯ Quick Reference Structure

### ğŸ“ Project Structure Overview
```
project/
â”œâ”€â”€ backend/                     # FastAPI Backend
â”‚   â”œâ”€â”€ app/                     # Main application
â”‚   â”œâ”€â”€ scripts/                 # Deployment scripts
â”‚   â””â”€â”€ tests/                   # Test suite
â”œâ”€â”€ frontend/                    # React Frontend
â”‚   â”œâ”€â”€ src/                     # Source code
â”‚   â””â”€â”€ public/                  # Static assets
â””â”€â”€ Documentation/               # Project docs
```

## ğŸ–¥ï¸ BACKEND FILE ORGANIZATION

### ğŸ“Š Core Application Files
```
backend/app/
â”œâ”€â”€ models.py                    # All database models and relationships
â”œâ”€â”€ crud.py                      # Database operations
â”œâ”€â”€ main.py                      # FastAPI app setup and configuration
â”œâ”€â”€ utils.py                     # Utility functions (email, tokens)
â”œâ”€â”€ api/                         # API routes organization
â”œâ”€â”€ core/                        # Core configuration
â”œâ”€â”€ services/                    # Business logic services
â””â”€â”€ alembic/                     # Database migrations
```

### ğŸ” Authentication & Security
```
backend/app/core/
â”œâ”€â”€ security.py                  # JWT creation, password hashing
â”œâ”€â”€ config.py                    # Environment configuration
â””â”€â”€ db.py                        # Database initialization

backend/app/api/
â””â”€â”€ deps.py                      # Auth dependencies, role validation
```

### ğŸŒ API Routes Organization
```
backend/app/api/routes/
â”œâ”€â”€ login.py                     # Authentication endpoints
â”œâ”€â”€ users.py                     # User management
â”œâ”€â”€ tenants.py                   # Tenant CRUD operations
â”œâ”€â”€ tenant_users.py              # Tenant user management
â”œâ”€â”€ tenant_api_keys.py           # Tenant API key management
â”œâ”€â”€ tenant_credits.py            # Credit management
â”œâ”€â”€ tenant_email_config.py       # Email configuration
â”œâ”€â”€ subscriptions.py             # Subscription management
â”œâ”€â”€ admin_api_keys.py            # Global API key management
â”œâ”€â”€ ai_proxy.py                  # AI API proxy
â”œâ”€â”€ items.py                     # Business entities
â””â”€â”€ utils.py                     # Utility endpoints
```

### ğŸ”§ Business Logic Services
```
backend/app/services/
â”œâ”€â”€ api_key_service.py           # API key encryption/management
â”œâ”€â”€ credit_service.py            # Credit operations
â”œâ”€â”€ invitation_service.py        # User invitation flow
â””â”€â”€ ai_api_service.py            # AI API proxy logic
```

### ğŸ“§ Email System
```
backend/app/email-templates/
â”œâ”€â”€ src/                         # MJML source templates
â”‚   â””â”€â”€ invitation.mjml          # Invitation email template
â””â”€â”€ build/                       # Compiled HTML templates
    â””â”€â”€ invitation.html          # Generated HTML
```

### ğŸ§ª Testing Structure
```
backend/app/tests/
â”œâ”€â”€ conftest.py                  # Test configuration
â”œâ”€â”€ api/routes/                  # API endpoint tests
â”œâ”€â”€ crud/                        # Database operation tests
â””â”€â”€ utils/                       # Test utilities
```

## ğŸ¨ FRONTEND FILE ORGANIZATION

### ğŸ“± Core Application Structure
```
frontend/src/
â”œâ”€â”€ main.tsx                     # App entry point
â”œâ”€â”€ routeTree.gen.ts            # Generated routes
â”œâ”€â”€ theme.tsx                   # Chakra UI theme
â”œâ”€â”€ utils.ts                    # Utility functions
â”œâ”€â”€ hooks/                      # Custom React hooks
â”œâ”€â”€ types/                      # TypeScript type definitions
â”œâ”€â”€ services/                   # API service calls
â”œâ”€â”€ components/                 # Reusable components
â””â”€â”€ routes/                     # Page components
```

### ğŸ” Authentication & Hooks
```
frontend/src/hooks/
â”œâ”€â”€ useAuth.ts                  # Authentication hook with tenant support
â””â”€â”€ useCustomToast.ts          # Toast notification hook
```

### ğŸŒ API Services
```
frontend/src/services/
â”œâ”€â”€ tenant-service.ts           # Tenant management API calls
â”œâ”€â”€ tenant-user-service.ts      # Tenant user management
â”œâ”€â”€ api-key-service.ts          # API key management
â”œâ”€â”€ credit-service.ts           # Credit transactions
â”œâ”€â”€ invitation-service.ts       # User invitation API
â”œâ”€â”€ email-config-service.ts     # Email configuration
â”œâ”€â”€ global-api-key-service.ts   # Global API key management
â””â”€â”€ admin-tenant-api-key-service.ts # Cross-tenant API key view
```

### ğŸ§© Component Organization
```
frontend/src/components/
â”œâ”€â”€ ui/                         # Chakra UI wrapper components
â”‚   â”œâ”€â”€ button.tsx             # Custom button component
â”‚   â”œâ”€â”€ dialog.tsx             # Modal dialogs
â”‚   â”œâ”€â”€ field.tsx              # Form field wrapper
â”‚   â”œâ”€â”€ checkbox.tsx           # Checkbox component
â”‚   â”œâ”€â”€ pagination.tsx         # Pagination component
â”‚   â””â”€â”€ ...                    # Other UI components
â”œâ”€â”€ Common/                     # Shared components
â”‚   â”œâ”€â”€ Navbar.tsx             # Top navigation
â”‚   â”œâ”€â”€ Sidebar.tsx            # Side navigation
â”‚   â”œâ”€â”€ SidebarItems.tsx       # Navigation items
â”‚   â”œâ”€â”€ UserMenu.tsx           # User dropdown menu
â”‚   â”œâ”€â”€ NotFound.tsx           # 404 page
â”‚   â””â”€â”€ GlobalInvitationModal.tsx # Global invitation modal
â”œâ”€â”€ Admin/                      # Admin-specific components
â”‚   â”œâ”€â”€ AddUser.tsx            # User creation form
â”‚   â”œâ”€â”€ EditUser.tsx           # User editing form
â”‚   â”œâ”€â”€ DeleteUser.tsx         # User deletion confirmation
â”‚   â”œâ”€â”€ TenantsManagement.tsx   # Tenant management dashboard
â”‚   â”œâ”€â”€ TenantUserManagement.tsx # Tenant user management
â”‚   â”œâ”€â”€ TenantApiKeyManagement.tsx # API key management
â”‚   â”œâ”€â”€ GlobalApiKeyManagement.tsx # Global API keys
â”‚   â”œâ”€â”€ CreditTransactions.tsx  # Credit management
â”‚   â”œâ”€â”€ SubscriptionPlanManagement.tsx # Plan management
â”‚   â”œâ”€â”€ EmailConfiguration.tsx  # Email settings
â”‚   â””â”€â”€ InvitationForm.tsx     # User invitation form
â”œâ”€â”€ Items/                      # Business entity components
â”‚   â”œâ”€â”€ AddItem.tsx            # Item creation
â”‚   â”œâ”€â”€ EditItem.tsx           # Item editing
â”‚   â””â”€â”€ DeleteItem.tsx         # Item deletion
â”œâ”€â”€ UserSettings/               # User settings components
â”‚   â”œâ”€â”€ UserInformation.tsx     # Profile management
â”‚   â”œâ”€â”€ ChangePassword.tsx      # Password change
â”‚   â”œâ”€â”€ Appearance.tsx          # Theme settings
â”‚   â”œâ”€â”€ DeleteAccount.tsx       # Account deletion
â”‚   â””â”€â”€ DeleteConfirmation.tsx  # Deletion confirmation
â”œâ”€â”€ Subscriptions/              # Subscription components
â”‚   â”œâ”€â”€ SubscriptionPlans.tsx   # Available plans
â”‚   â””â”€â”€ CurrentSubscription.tsx # Current subscription status
â””â”€â”€ Pending/                    # Loading state components
    â”œâ”€â”€ PendingItems.tsx       # Loading items
    â””â”€â”€ PendingUsers.tsx       # Loading users
```

### ğŸ›£ï¸ Route Organization
```
frontend/src/routes/
â”œâ”€â”€ __root.tsx                  # Root layout
â”œâ”€â”€ _layout.tsx                 # Authenticated layout
â”œâ”€â”€ login.tsx                   # Login page
â”œâ”€â”€ signup.tsx                  # Registration page
â”œâ”€â”€ recover-password.tsx        # Password recovery
â”œâ”€â”€ reset-password.tsx          # Password reset
â”œâ”€â”€ accept-invitation.tsx       # Invitation acceptance
â””â”€â”€ _layout/                    # Protected routes
    â”œâ”€â”€ index.tsx              # Dashboard
    â”œâ”€â”€ admin.tsx              # Admin dashboard
    â”œâ”€â”€ items.tsx              # Items management
    â”œâ”€â”€ settings.tsx           # User settings
    â”œâ”€â”€ subscriptions.tsx      # Subscription management
    â””â”€â”€ tenant-users.tsx       # Tenant user management
```

### ğŸ¨ Type Definitions
```
frontend/src/types/
â””â”€â”€ tenant.ts                  # Extended types for multi-tenant features
```

### ğŸŒ Generated API Client
```
frontend/src/client/
â”œâ”€â”€ index.ts                   # Main client exports
â”œâ”€â”€ sdk.gen.ts                 # Generated API methods
â”œâ”€â”€ types.gen.ts               # Generated TypeScript types
â”œâ”€â”€ schemas.gen.ts             # API schemas
â””â”€â”€ core/                      # Client core functionality
    â”œâ”€â”€ ApiError.ts            # Error handling
    â”œâ”€â”€ OpenAPI.ts             # API configuration
    â””â”€â”€ request.ts             # HTTP request logic
```

## ğŸ”§ Configuration Files

### Backend Configuration
```
backend/
â”œâ”€â”€ .env                       # Environment variables
â”œâ”€â”€ pyproject.toml            # Python dependencies
â”œâ”€â”€ Dockerfile                # Container configuration
â”œâ”€â”€ docker-compose.yml        # Development setup
â””â”€â”€ app/alembic/
    â”œâ”€â”€ alembic.ini           # Migration configuration
    â””â”€â”€ env.py                # Migration environment
```

### Frontend Configuration
```
frontend/
â”œâ”€â”€ .env.development          # Development environment
â”œâ”€â”€ package.json              # Node dependencies
â”œâ”€â”€ vite.config.ts           # Vite configuration
â”œâ”€â”€ tsconfig.json            # TypeScript configuration
â””â”€â”€ index.html               # HTML template
```

## ğŸ“‹ Common Update Scenarios

### Adding New Database Model
**Backend Files:**
1. `backend/app/models.py` - Add model class
2. `alembic revision --autogenerate` - Create migration
3. `backend/app/crud.py` - Add CRUD operations

### Adding New API Endpoint
**Backend Files:**
1. `backend/app/api/routes/[module].py` - Add route
2. `backend/app/api/main.py` - Register router
3. `backend/app/models.py` - Add request/response models

**Frontend Files:**
1. `frontend/src/services/[module]-service.ts` - Add API call
2. `frontend/src/types/[module].ts` - Add TypeScript types

### Adding New Page/Component
**Frontend Files:**
1. `frontend/src/routes/[page].tsx` - Create page component
2. `frontend/src/components/[Module]/[Component].tsx` - Create component
3. Update navigation in `frontend/src/components/Common/SidebarItems.tsx`

### Adding New User Role
**Backend Files:**
1. `backend/app/models.py` - Update TokenPayload
2. `backend/app/api/deps.py` - Add role dependencies

**Frontend Files:**
1. `frontend/src/types/tenant.ts` - Update user types
2. `frontend/src/hooks/useAuth.ts` - Update auth hook
3. Update role checks in components

### Email Template Updates
**Backend Files:**
1. `backend/app/email-templates/src/*.mjml` - Edit source
2. Compile to HTML in `backend/app/email-templates/build/`
3. `backend/app/utils.py` - Update email logic

## ğŸ’¡ Development Workflow

### Backend Development
1. **Models** â†’ `backend/app/models.py`
2. **Migrations** â†’ `alembic revision --autogenerate`
3. **API Routes** â†’ `backend/app/api/routes/`
4. **Services** â†’ `backend/app/services/`
5. **Tests** â†’ `backend/app/tests/`

### Frontend Development
1. **Types** â†’ `frontend/src/types/`
2. **Services** â†’ `frontend/src/services/`
3. **Components** â†’ `frontend/src/components/`
4. **Routes** â†’ `frontend/src/routes/`
5. **Hooks** â†’ `frontend/src/hooks/`

### Testing Strategy
- **Backend**: API endpoint tests, CRUD tests, service tests
- **Frontend**: Component tests, integration tests, E2E tests
- **Database**: Migration tests, constraint tests